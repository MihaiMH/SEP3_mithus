@page "/"
@using HttpClients.ClientInterfaces
@inject IPostService postService;
<div class="header">
    <div class="searchBox">
        <h1>Find Your Perfect Home</h1>
        <div class="searchBar">
            <div style="display: flex; padding: 5px; width: 100%; overflow: hidden;">
                <img src="img/image%201.png" alt="">
                <input type="text">
            </div>
            <a href="" class="searchBtn">
                <div>
                    <p>Search</p>
                </div>
            </a>
        </div>

    </div>


    <img class="wave" src="img/waves 1.png" alt="">

</div>
<div class="showcase">
    <h3 class="body_title">
        <b>Newly Listed</b>
    </h3>
    <div class="container">
        <div class="wrapper" style="display: flex">
            @if (posts == null)
            {
                <span>Loading..</span>
            }
            else if (!posts.Any())
            {
                <span>No users to be found</span>
            }
            else
            {
                <div class="users-container">
                    @for( i = 1; i<=j; i++)
                    {
                        <ApprtCard PostObj="@posts.ElementAt(i)"/>
                    }
                </div>
            }

        </div>
    </div>

    <div class="btnContainer">
        <p class="btnContainerText">Find the Perfect Home for You</p>
        <button class="seeListingsbtn" @onclick="Increment" >Browse all Listings</button>
    </div>
</div>

@code {
    int j = 6;
    int i ;
    void Increment()
    {
        i = j + 1;
        j+=3;
    }
    static IEnumerable<Domain.Models.Post>? posts;

    protected override async Task OnInitializedAsync()
    {
    // msg = "";
        try
        {
            posts = await postService.GetAllPostsAsync();
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
    // msg = e.Message;
        }
    }

}